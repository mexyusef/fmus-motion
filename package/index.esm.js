import*as e from"react";import t,{useState as i,useEffect as n,createContext as r,useContext as o,forwardRef as a}from"react";import{MotionConfig as d,motion as s,useAnimation as c}from"framer-motion";var l=function(){return l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},l.apply(this,arguments)};function u(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}"function"==typeof SuppressedError&&SuppressedError;var v={pop:[.16,1.44,.3,1.01],snap:[.05,.7,.1,1],woosh:[.25,.1,.25,1],gentle:[.4,0,.2,1]},f=function(e){if(e)return v[e]||e},p=function(e,t,i,n){return{type:"tween",duration:e,ease:f(t),delay:i,repeat:"infinite"===n?1/0:n}},y=function(e,t){return void 0===e&&(e=.25),void 0===t&&(t=.5),{type:"spring",bounce:e,duration:t}},h=function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=1),{hidden:{opacity:e,transition:i},visible:{opacity:t,transition:i}}},g=function(e,t,i){void 0===t&&(t=50);var n=function(e,t){switch(void 0===t&&(t=50),e){case"up":return{y:t};case"down":return{y:-t};case"left":return{x:t};case"right":return{x:-t};default:return{x:0}}}(e,t);return{hidden:l(l({},n),{opacity:0,transition:i}),visible:l(l({},Object.keys(n).reduce((function(e,t){var i;return l(l({},e),((i={})[t]=0,i))}),{})),{opacity:1,transition:i})}},b=function(e,t,i,n){return void 0===e&&(e=1.05),void 0===t&&(t=0),void 0===i&&(i=.95),{initial:{scale:1,rotate:0,transition:n},hover:{scale:e,rotate:t,transition:n},tap:{scale:i,transition:n?l(l({},n),{type:"tween",duration:"tween"===n.type&&"duration"in n?n.duration/2:.15}):{type:"tween",duration:.15}}}},m=function(e,t){return void 0===e&&(e=!1),e?{outline:"2px dashed rgba(255, 0, 0, 0.5)",position:"relative"}:{}},w=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t="component"),e?{"data-fmus-debug":t}:{}},O=function(e,t){void 0===e&&(e=!1);for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];e&&console.log.apply(console,function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}(["[FMUS] ".concat(t)],i,!1))},S=function(){var e=i(!1),t=e[0],r=e[1];return n((function(){var e=window.matchMedia("(prefers-reduced-motion: reduce)");r(e.matches);var t=function(){r(e.matches)};return e.addEventListener("change",t),function(){e.removeEventListener("change",t)}}),[]),t},M=function(e,t,i){return void 0===e&&(e=.3),void 0===t&&(t="user-preference"),void 0===i&&(i=!1),"always"===t?0:"never"===t?e:i?0:e},E=function(e,t){return void 0===e&&(e="user-preference"),void 0===t&&(t=!1),"always"===e||"never"!==e&&t},V=r({debug:!1,reducedMotion:"user-preference"}),N=function(){return o(V)},I=function(e){var i,n,r=e.children,o=e.reducedMotion,a=void 0===o?"user-preference":o,s=e.defaults,c=void 0===s?{}:s,l=e.debug,u=void 0!==l&&l,v=S(),p="always"===a||"user-preference"===a&&v,y={type:"tween"};return c.transition&&Object.assign(y,c.transition),y.duration=p?0:(null===(i=c.transition)||void 0===i?void 0:i.duration)||.3,(null===(n=c.transition)||void 0===n?void 0:n.ease)&&(y.ease=f(c.transition.ease)),t.createElement(V.Provider,{value:{debug:u,reducedMotion:a}},t.createElement(d,{reducedMotion:p?"always":"never",transition:y},r))},j=a((function(e,i){var n=e.children,r=e.from,o=void 0===r?0:r,a=e.to,d=void 0===a?1:a,c=e.duration,v=void 0===c?.5:c,f=e.delay,y=void 0===f?0:f,g=e.ease,b=void 0===g?"gentle":g,E=e.repeat,V=void 0===E?0:E,I=e.className,j=void 0===I?"":I,x=e.style,R=void 0===x?{}:x,k=e.disabled,A=void 0!==k&&k,P=e.as,B=void 0===P?"div":P,C=e.debug,F=void 0!==C&&C,L=u(e,["children","from","to","duration","delay","ease","repeat","className","style","disabled","as","debug"]),$=N(),z=$.debug,H=$.reducedMotion,T=S(),U=F||z,W=M(v,H,T),_=A||0===W;O(U,"FadeIn rendering with duration: ".concat(W,"s, disabled: ").concat(_),{from:o,to:d,delay:y,ease:b,repeat:V});var q=p(W,b,y,V),D=h(o,d,q),G=s[B];return t.createElement(G,l({ref:i,initial:_?"visible":"hidden",animate:"visible",variants:D,className:j,style:l(l({},R),m(U))},w(U,"FadeIn"),L),n)}));j.displayName="FadeIn";var x=a((function(e,i){var n=e.children,r=e.from,o=void 0===r?"left":r,a=e.distance,d=void 0===a?50:a,c=e.duration,v=void 0===c?.5:c,f=e.delay,h=void 0===f?0:f,b=e.ease,E=void 0===b?"woosh":b,V=e.repeat,I=void 0===V?0:V,j=e.spring,x=void 0!==j&&j,R=e.bounce,k=void 0===R?.25:R,A=e.className,P=void 0===A?"":A,B=e.style,C=void 0===B?{}:B,F=e.disabled,L=void 0!==F&&F,$=e.as,z=void 0===$?"div":$,H=e.debug,T=void 0!==H&&H,U=u(e,["children","from","distance","duration","delay","ease","repeat","spring","bounce","className","style","disabled","as","debug"]),W=N(),_=W.debug,q=W.reducedMotion,D=S(),G=T||_,J=M(v,q,D),K=L||0===J;O(G,"Slide rendering with direction: ".concat(o,", distance: ").concat(d,"px, disabled: ").concat(K),{duration:J,delay:h,ease:E,repeat:I,spring:x,bounce:k});var Q=x?y(k,J):p(J,E,h,I),X=g(o,d,Q),Y=s[z];return t.createElement(Y,l({ref:i,initial:K?"visible":"hidden",animate:"visible",variants:X,className:P,style:l(l({},C),m(G))},w(G,"Slide"),U),n)}));x.displayName="Slide";var R=a((function(e,i){var n=e.children,r=e.scale,o=void 0===r?1.05:r,a=e.rotate,d=void 0===a?0:a,c=e.tapScale,v=void 0===c?.95:c,f=e.duration,y=void 0===f?.15:f,h=e.ease,g=void 0===h?"snap":h,E=e.className,V=void 0===E?"":E,I=e.style,j=void 0===I?{}:I,x=e.disabled,R=void 0!==x&&x,k=e.as,A=void 0===k?"div":k,P=e.debug,B=void 0!==P&&P,C=u(e,["children","scale","rotate","tapScale","duration","ease","className","style","disabled","as","debug"]),F=N(),L=F.debug,$=F.reducedMotion,z=S(),H=B||L,T=M(y,$,z),U=R||0===T;O(H,"Bop rendering with scale: ".concat(o,", rotate: ").concat(d,"deg, disabled: ").concat(U),{tapScale:v,duration:T,ease:g});var W=p(T,g),_=b(o,d,v,W),q=s[A];return t.createElement(q,l({ref:i,initial:"initial",whileHover:U?void 0:"hover",whileTap:U?void 0:"tap",variants:_,className:V,style:l(l({},j),m(H))},w(H,"Bop"),C),n)}));R.displayName="Bop";var k=new Map,A=new WeakMap,P=0;function B(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(i=e.root,i?(A.has(i)||(P+=1,A.set(i,P.toString())),A.get(i)):"0"):e[t]}`;var i})).toString()}function C(e,t,i={},n=undefined){if(void 0===window.IntersectionObserver&&void 0!==n){const r=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof i.threshold?i.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}const{id:r,observer:o,elements:a}=function(e){const t=B(e);let i=k.get(t);if(!i){const n=new Map;let r;const o=new IntersectionObserver((t=>{t.forEach((t=>{var i;const o=t.isIntersecting&&r.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(i=n.get(t.target))||i.forEach((e=>{e(o,t)}))}))}),e);r=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:o,elements:n},k.set(t,i)}return i}(i),d=a.get(e)||[];return a.has(e)||a.set(e,d),d.push(t),o.observe(e),function(){d.splice(d.indexOf(t),1),0===d.length&&(a.delete(e),o.unobserve(e)),0===a.size&&(o.disconnect(),k.delete(r))}}function F({threshold:t,delay:i,trackVisibility:n,rootMargin:r,root:o,triggerOnce:a,skip:d,initialInView:s,fallbackInView:c,onChange:l}={}){var u;const[v,f]=e.useState(null),p=e.useRef(l),[y,h]=e.useState({inView:!!s,entry:void 0});p.current=l,e.useEffect((()=>{if(d||!v)return;let e;return e=C(v,((t,i)=>{h({inView:t,entry:i}),p.current&&p.current(t,i),i.isIntersecting&&a&&e&&(e(),e=void 0)}),{root:o,rootMargin:r,threshold:t,trackVisibility:n,delay:i},c),()=>{e&&e()}}),[Array.isArray(t)?t.toString():t,v,o,r,a,d,n,c,i]);const g=null==(u=y.entry)?void 0:u.target,b=e.useRef(void 0);v||!g||a||d||b.current===g||(b.current=g,h({inView:!!s,entry:void 0}));const m=[f,y.inView,y.entry];return m.ref=m[0],m.inView=m[1],m.entry=m[2],m}var L=function(e){var t=e||{},i=t.threshold,r=void 0===i?.1:i,o=t.once,a=void 0===o||o,d=t.animation,s=void 0===d?{opacity:[0,1],y:[10,0]}:d,c=t.transition,u=t.root,v=t.rootMargin,f=N().debug,p=S(),y=F({threshold:r,triggerOnce:a,root:u,rootMargin:v}),h=y.ref,g=y.inView;return n((function(){if(!p&&(O(f,"ScrollReveal element is ".concat(g?"visible":"hidden"),{threshold:r,once:a,animation:s}),g)){var e=h.current;if(e){var t=s,i=c?l(l({},t),{transition:c}):t;Object.entries(i).forEach((function(t){var i=t[0],n=t[1];"transition"!==i&&(Array.isArray(n)&&n.length>0?e.style.setProperty(i,String(n[n.length-1])):void 0!==n&&e.style.setProperty(i,String(n)))}))}}}),[g,s,c,h,f,p,a,r]),h},$=function(e){var t=e||{},r=t.threshold,o=void 0===r?.1:r,a=t.once,d=void 0===a||a,s=t.animation,u=void 0===s?{opacity:[0,1],y:[10,0]}:s,v=t.transition,f=t.root,p=t.rootMargin,y=N().debug,h=S(),g=c(),b=i(!1),m=b[0],w=b[1],M=F({threshold:o,triggerOnce:d,root:f,rootMargin:p}),E=M.ref,V=M.inView;return n((function(){if(h)w(!0);else if(O(y,"ScrollRevealControls element is ".concat(V?"visible":"hidden"),{threshold:o,once:d,animation:u}),V){var e=u,t=v?l(l({},e),{transition:v}):e;g.start(t),w(!0)}else d||(g.start({opacity:0,y:10}),w(!1))}),[V,u,v,g,y,h,d,o]),[E,g,m]};export{R as Bop,j as FadeIn,I as MotionConfig,x as Slide,b as createBopVariants,h as createFadeVariants,g as createSlideVariants,y as createSpring,p as createTransition,M as getAccessibleDuration,f as getEasing,E as shouldDisableAnimation,N as useFMUSMotion,S as usePrefersReducedMotion,L as useScrollReveal,$ as useScrollRevealControls};
//# sourceMappingURL=index.esm.js.map
